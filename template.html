<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Awesome Go Table</title>
	<link rel="stylesheet"
		href="https://cdn.jsdelivr.net/npm/slickgrid@5.13.1/dist/styles/css/slick-alpine-theme.min.css">
	<script src="https://cdn.jsdelivr.net/npm/slickgrid@5.14.0/dist/browser/slick.core.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/slickgrid@5.14.0/dist/browser/slick.interactions.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/slickgrid@5.14.0/dist/browser/slick.grid.min.js"></script>
	<script>
		document.onreadystatechange(e => {
			var columns = [
				{
					id: "category",
					field: "category",
					name: "Category",
				},
				{
					id: "subcategory",
					field: "subcategory",
					name: "Subcategory",
				},
				{
					id: "special_category",
					field: "special_category",
					name: "Special Category",
				},
				{
					id: "repo_name",
					field: "repo_name",
					name: "Name",
				},
				{
					id: "description",
					field: "description",
					name: "Description",
				},
				{
					id: "stars",
					field: "stars",
					name: "Stars",
				},
				{
					id: "last_commit",
					field: "last_commit",
					name: "Last Commit",
				},
				{
					id: "contributer_count",
					field: "contributer_count",
					name: "Contributors",
				}
			]

			let scriptElement = document.getElementById('data');
			let repoData = JSON.parse(decodeURIComponent(atob(scriptElement.textContent).split('').map(function (c) {
				return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
			}).join('')));

			// const dataView = new SlickDataView({ inlineFilters: true });
			const grid = new Slick.Grid("#grid", repoData, columns, {});

			for (let i = 0; i < repoData.length; i++) {
				repoData[i].repo_name = html(`<a href="${repoData[i].url}" target="_blank">${repoData[i].repo_name}</a>`);
			}
		})
	</script>
</head>

<body>
	<div id="grid"></div>
</body>

</html>
